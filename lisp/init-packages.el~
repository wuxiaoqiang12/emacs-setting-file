(require 'cl)

(require 'package)
(let* ((no-ssl (and (memq system-type '(windows-nt ms-dos))
                    (not (gnutls-available-p))))
       (proto (if no-ssl "http" "https")))
  (add-to-list 'package-archives
               (cons "melpa" (concat proto "://melpa.org/packages/")) t))
(package-initialize)

;;add whatever packages you want here
(defvar jon/packages '(
		       company
		       company-coq
		       proof-general
		       monokai-theme
		       hungry-delete
		       swiper
		       counsel
		       smartparens
		       popwin
		       ) "Default packages")

(setq package-selected-packages jon/packages)

(defun jon/packages-installed-p ()
  (loop for pkg in jon/packages
	when (not (package-installed-p pkg)) do (return nil)
	finally (return t)))

(unless (jon/packages-installed-p)
  (message "%s" "Refreshing package database...")
  (package-refresh-contents)
  (dolist (pkg jon/packages)
    (when (not (package-installed-p pkg))
      (package-install pkg))))

(global-hungry-delete-mode)

;;(add-hook 'emacs-lisp-mode-hook 'smartparens-mode)
(smartparens-global-mode t)

(ivy-mode 1)
(setq ivy-use-virtual-buffers t)

(global-company-mode t)

(load-theme 'monokai t)

(require 'popwin)
(popwin-mode t)

;; Load company-coq when opening Coq files
(add-hook 'coq-mode-hook #'company-coq-mode)

(cua-mode t)
(setq-default cua-auto-tabify-rectangles nil)
(transient-mark-mode 1)
(setq-default cua-keep-region-after-copy t)


(provide 'init-packages)
